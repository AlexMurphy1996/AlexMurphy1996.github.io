<html>
	<head>
		<link href="https://ssl.microsofttranslator.com/static/25481438/css/WidgetV3.css?v=25481438" rel="stylesheet">
		<title>Translate Widget Example</title>
		<script type="text/javascript" charset="utf8" src="https://lpcdn.lpsnmedia.net/webagent/client-SDK.min.js"></script>
		<link rel="stylesheet" href="css/bootstrap-slate.min.css">
		<link rel="stylesheet" href="css/example2.css">
		<script src="js/jquery.min.js"></script>
		<script src="js/bootstrap.min.js"></script>
		<script src="https://www.microsoftTranslator.com/ajax/v3/WidgetV3.ashx?siteData=ueOIGRSKkd965FeEGM5JtQ**&amp;widget=none" type="text/javascript"></script>
		<style>
			/* centered columns styles */

			.row-centered {
				text-align: center;
			}

			.col-centered {
				display: block;
				margin-left: auto;
				margin-right: auto;
				text-align: center;
			}

			.LTRStyle {
				display: none !important;
			}
			
			body {background-color: #F0F0F0;}

		</style>
		<script type="text/javascript" charset="utf-8" src="https://ssl.bing.com/widget/metrics.js"></script><script type="text/javascript" charset="utf-8" src="https://www.microsofttranslator.com/ajax/v3/community.aspx?fmt=js&amp;loc=en&amp;siteData=ueOIGRSKkd965FeEGM5JtQ**"></script>
		<style type="text/css"></style>
	</head>

	<body style="">
		<div id="MicrosoftTranslatorCommunity" style="display: none;" class="MSTCltr">
			<div id="MSTCContent" translate="no">
				<a id="MSTCExpandLink" href="javascript:void(0)">
					<span id="MSTCImprove">Show all community translations</span>
				</a>
				<div id="MSTCRootPanel">
					<span id="MSTCLoading">Loading...</span>
					<div id="MSTCTransPanelError" style="display: none;">
						<div class="MSTCTableRow">
							<div class="MSTCTransPanelExc MSTCTableCell">
								<img id="ExclamationImage" src="https://ssl.microsofttranslator.com/static/25481438/img/error_exclamation.gif" style="border-width:0px;">
							</div>
							<div class="MSTCTableCell">
								<span id="MSTCTransPanelErrorMsg"></span>
							</div>
						</div>
						<div class="MSTCTableRow">
							<div class="MSTCTableCell"></div>
							<div class="MSTCTableCell MSTCFlipHoriz">
								<a href="http://go.microsoft.com/?linkid=9713560" target="_blank">
									<img id="MSTCHelpImgBtn" class="MSTCErrorButtons" src="https://ssl.microsofttranslator.com/static/25481438/img/error_help.gif" style="border-width:0px;">
								</a>
								<input type="image" name="MSTCOKImgBtn" id="MSTCOKImgBtn" class="MSTCErrorButtons" src="https://ssl.microsofttranslator.com/static/25481438/img/error_OK.gif" style="border-width:0px;">
							</div>
						</div>
					</div>
					<div id="MSTCTransPanel"></div>
					<div id="MSTCPrevNextPanel" style="display: none;">
						<a id="MSTCPrevLink" href="javascript:void(0)">
							<span>Previous</span>
							<span id="MSTCPrevCount">(0)</span>
						</a>
						<a id="MSTCNextLink" href="javascript:void(0)">
							<span>Next</span>
							<span id="MSTCNextCount">(0)</span>
						</a>
					</div>
					<div id="MSTCFooterPanel">
						<span id="MSTCLegalHelpBox">
							<a id="MSTCLegalLink" href="https://www.microsoft.com/servicesagreement/" target="_blank">Legal</a>
						</span>
					</div>
				</div>
			</div>
		</div>
		<!-- Start of Container -->
		<div class="container">
			<!-- Visitor Chat Area -->
			<div class="row row-centered">
				<div class="col-md-4 col-centered"></div>
				<div class="col-md-4 col-centered">
					<img src="https://sportsarbitrage.com.au/wp-content/uploads/2017/07/Betfair-saa.jpg" alt="Betfair Banner" style="width:200px" >
					<div translate="no">
						<h2>Visitor Message</h2>
					</div>
					<div>
						<textarea id="visitorChat" rows="5" class="commandInput" disabled=""></textarea>
					</div>
					<div id="visitorChat2" style="display: none;"></div>
				</div>
				<div class="col-md-4 col-centered"></div>
			</div>
			<br>
			<!-- End of Visitor Chat Area -->
			<!-- Start of Agent Chat Area -->
			<div class="row row-centered">
				<div class="col-md-4 col-centered"></div>
				<div class="col-md-4 col-centered">
					<div translate="no">
						<h2>Agent Response</h2>
						<textarea id="agentChat" rows="5" class="commandInput"></textarea>
						<br>
						<br>
						<button type="button" class="btn btn-block btn-default" onclick="translateChat()">Translate Message</button>
					</div>
					<div id="agentChatTranslated" style="display: none;"></div>
				</div>
				<div class="col-md-4 col-centered"></div>
			</div>
			<!-- Start of Agent Chat Area -->
		</div>
		<!-- End of Container -->
		<script>
			var skill;
			var SDK = lpTag.agentSDK;
			SDK.init();
			//success function for getting the engagement info from the sdk
			var onSuccess = function(data) {
				//if the skill is not set, it will be a null value, not unskilled
				skill = data.skill;
				console.log(skill);
			};
			//error is called if we are not able to get the engagement infor from the sdk
			var onError = function(err) {who
				// Do something with the error
				console.log(err);
			};
			var updateCallback = function(data) {
				// called each time the value is updated; if there is an existing value when bind
				//is called - this callback will be called with the existing value
				//console.log(data.newValue);
				//strip the html elements from the chat line
				var chatLine = data.newValue.lines[0].text.replace(/(<p[^>]*>|<\/p>)/g, "");
				//console.log(chatLine);
				//add new chat line to page if it is from the visitor
				if (data.newValue.lines[0].source == 'visitor') {
					//update the hidden div with the visitors chat line
					document.getElementById('visitorChat2').innerHTML = chatLine;
					//translate the visitors chat line based on skill group
					
					onComplete2();
				}
			};
			var notifyWhenDone = function(err) {
				if (err) {
					// Do something with the error
				}
				// called when the bind is completed successfully,
				// or when the action terminated with an error
			};

			//path to the engagementInfo from the sdk
			var pathToEngagementInfo = "engagementInfo";
			SDK.get(pathToEngagementInfo, onSuccess, onError);

			//path to the chat transcript from the sdk
			var pathToData = "chatTranscript";
			//bin the chat transcript so it will listen for new chatlines
			SDK.bind(pathToData, updateCallback, notifyWhenDone);
			//translate the agents message
			function translateChat() {
				//update the hidden div
				document.getElementById('agentChatTranslated').innerHTML = document.getElementById('agentChat').value;
				//transalte the agents message
				onComplete();
			}
			//called when the translation is complete
			function onComplete() {
				//alert("Done");
				//get the translated text
				var translation = document.getElementById('agentChatTranslated').innerHTML;
				var data = {
					text: translation
				};
				//send the translation to the agent console
				SDK.command('Write ChatLine', data);
				//close the translation widget
				$('#WidgetCloseImage').trigger("click");
			}
			//called when the translation is complete
			function onComplete2() {
				//alert("Done");
				//update the text area with the translation
				document.getElementById('visitorChat').value = document.getElementById('visitorChat2').innerHTML;
				//close the translation widget
				$('#WidgetCloseImage').trigger("click");
			}
			//called while the translation is in progress
			function onProgress(value) {

			}
			//called if there is an error translating
			function onError(error) {
				alert("Translation Error: " + error);
			}
			//called when the widget is closed
			function onRestoreOriginal() {
				//alert("The page was reverted to the original language. This message is not part of the widget.");
			}

			var HttpClient = function() {
				this.get = function(aUrl, aCallback) {
					var anHttpRequest = new XMLHttpRequest();
					anHttpRequest.onreadystatechange = function() {
						if (anHttpRequest.readyState == 4 && anHttpRequest.status == 200)
							aCallback(anHttpRequest.responseText);
					}
					anHttpRequest.open("GET", aUrl, true);
					anHttpRequest.send( null );
				}
			}
			
			function translator(text) {
				
				//var text = 'Hello world! Hope you are well, if not, too bad.'
				//text = text.replace(/\s/g, "%20");
				var theurl = 'https://www.googleapis.com/language/translate/v2?key=AIzaSyAYKCnktSo4KKnIU5CPEy5iGbkcPBHt_kI&target=de&q=' + text;
				var client = new HttpClient();
						client.get(theurl, function(response) {
							var response1 = JSON.parse(response);
							//alert(response);
							document.getElementById("visitorChat2").innerHTML = response1.data.translations[0].detectedSourceLanguage;
						});
			}
		</script>



		<title> </title>
		<div id="WidgetFloaterPanels" translate="no" style="display: none;text-align: left;direction: ltr" class="LTRStyle"> 
			<div id="WidgetFloater" style="display: none" onmouseover="Microsoft.Translator.OnMouseOverFloater()" onmouseout="Microsoft.Translator.OnMouseOutFloater()"> 
				<div id="WidgetLogoPanel"> 
					<span id="WidgetTranslateWithSpan" style="text-align:left;">Bing Translator</span> 
					<span id="WidgetCloseButton" title="Exit Translation" onclick="Microsoft.Translator.FloaterOnClose()">
						<img src="https://ssl.microsofttranslator.com/static/25481438/img/close_x.png" id="WidgetCloseImage" class="WidgetCloseImage">
					</span>
				</div> 
				<div id="LanguageMenuPanel"> 
					<div class="DDStyle_outer">
						<input name="LanguageMenu_svid" type="text" id="LanguageMenu_svid" style="display:none;" autocomplete="on" value="af" onclick="this.select()"> 
						<input name="LanguageMenu_textid" type="text" id="LanguageMenu_textid" style="display:none;" autocomplete="on" onclick="this.select()"> 
						<span onselectstart="return false" tabindex="0" class="DDStyle" id="__LanguageMenu_header" onclick="return LanguageMenu &amp;&amp; !LanguageMenu.Show('__LanguageMenu_popup', event);" onkeydown="return LanguageMenu &amp;&amp; !LanguageMenu.Show('__LanguageMenu_popup', event);" title="Afrikaans" style="overflow: visible;">Afrikaans</span> 
						<div style="position:relative;text-align:left;left:0;">
							<div style="position:absolute;width:;left:0px;">
								<div class="DDStyle" style="display:none;" id="__LanguageMenu_popup"> 
									
									<img alt="" src="https://ssl.microsofttranslator.com/static/25481438/img/niche.gif" style="height:7px;width:17px;border-width:0px;left:20px;"> 
									<div id="OriginalLanguageDiv">
										<span id="OriginalTextSpan">ORIGINAL: </span>
										<span id="OriginalLanguageSpan"></span>
									</div>
								</div>
							</div>
						</div>
					</div> 
					<script type="text/javascript"> 
						var LanguageMenu; 
						var LanguageMenu_keys=["af","ar","bn","bs-Latn","bg","yue","ca","zh-CHS","zh-CHT","hr","cs","da","nl","en","et","fj","fil","fi","fr","de","el","ht","he","hi","mww","hu","is","id","it","ja","sw","tlh","ko","lv","lt","mg","ms","mt","no","fa","pl","pt","otq","ro","ru","sm","sr-Cyrl","sr-Latn","sk","sl","es","sv","ty","ta","th","to","tr","uk","ur","vi","cy","yua"]; 
						var LanguageMenu_values=["Afrikaans","Arabic","Bangla","Bosnian (Latin)","Bulgarian","Cantonese (Traditional)","Catalan","Chinese Simplified","Chinese Traditional","Croatian","Czech","Danish","Dutch","English","Estonian","Fijian","Filipino","Finnish","French","German","Greek","Haitian Creole","Hebrew","Hindi","Hmong Daw","Hungarian","Icelandic","Indonesian","Italian","Japanese","Kiswahili","Klingon","Korean","Latvian","Lithuanian","Malagasy","Malay","Maltese","Norwegian Bokmål","Persian","Polish","Portuguese","Querétaro Otomi","Romanian","Russian","Samoan","Serbian (Cyrillic)","Serbian (Latin)","Slovak","Slovenian","Spanish","Swedish","Tahitian","Tamil","Thai","Tongan","Turkish","Ukrainian","Urdu","Vietnamese","Welsh","Yucatec Maya"]; 
						var LanguageMenu_callback=function(){ }; 
						var LanguageMenu_popupid='__LanguageMenu_popup'; 
					</script> 
				</div> 
				<div id="CTFLinksPanel"> 
					<span id="ExternalLinksPanel">
						<a id="BingTranslatorLink" title="bing.com/translator" href="http://www.bing.com/translator" target="_blank"> 
							<img id="BingTranslatorLinkImg" src="https://ssl.microsofttranslator.com/static/25481438/img/bingmark.png">
						</a> 
						<a id="FacebookLink" href="https://www.facebook.com/microsofttranslator" title="Bing Translator on Facebook" target="_blank"> 
							<img id="FacebookImg" src="https://ssl.microsofttranslator.com/static/25481438/img/fbookmark.png">
						</a> 
						<a id="ShareLink" title="Share" href="javascript:Microsoft.Translator.FloaterShowSharePanel()"> 
							<img id="ShareImg" src="https://ssl.microsofttranslator.com/static/25481438/img/sharemark.png">
						</a> 
					</span> 
				</div> 
				<div id="FloaterProgressBar"> 
					<div id="ProgressFill"> Translating... </div> 
				</div> 
			</div> 
			<div id="WidgetFloaterCollapsed" style="display: none" onmouseover="Microsoft.Translator.OnMouseOverFloater()"> 
					<span id="WidgetFloaterCollapsedSpan">Bing Translator</span> 
					<span id="WidgetCloseButtonCollapsed" title="Exit Translation" onclick="Microsoft.Translator.FloaterOnClose()">
						<img src="https://ssl.microsofttranslator.com/static/25481438/img/close_x.png" id="WidgetCloseImageCollapsed" class="WidgetCloseImage">
					</span>
				</div> 
			<div id="FloaterSharePanel" style="display: none"> 
					<div id="ShareTextDiv"> 
						<span id="ShareTextSpan"> COPY THE URL BELOW </span> 
					</div> 
					<div id="ShareTextboxDiv"> 
						<input name="ShareTextbox" type="text" id="ShareTextbox" readonly="readonly" onclick="this.select()"> 
						<!--a id="TwitterLink" title="Share on Twitter"> <img id="TwitterImg" src="https://ssl.microsofttranslator.com/static/25481438/img/twitter_icon.png" /></a> 
						<a-- id="FacebookLink" title="Share on Facebook"> <img id="FacebookImg" src="https://ssl.microsofttranslator.com/static/25481438/img/facebook_icon.png" /></a--> 
						<a id="EmailLink" title="Email this translation"> 
							<img id="EmailImg" src="https://ssl.microsofttranslator.com/static/25481438/img/email_icon.png">
						</a> 
					</div> 
					<div id="ShareFooter"> 
						<span id="ShareHelpSpan">
							<a id="ShareHelpLink"> 
								<img id="ShareHelpImg" src="https://ssl.microsofttranslator.com/static/25481438/img/embed_question.png">
							</a>
						</span> 
						<span id="ShareBackSpan">
							<a id="ShareBack" href="javascript:Microsoft.Translator.FloaterOnShareBackClick()" title="Back To Translation"> Back</a>
						</span> 
					</div> 
					<input name="EmailSubject" type="hidden" id="EmailSubject" value="Check out this page in {0} translated from {1}"> 
					<input name="EmailBody" type="hidden" id="EmailBody" value="Translated: {0}%0d%0aOriginal: {1}%0d%0a%0d%0aAutomatic translation powered by Microsoft® Translator%0d%0ahttp://www.bing.com/translator?ref=MSTWidget"> 
					<input type="hidden" id="ShareHelpText" value="This link allows visitors to launch this page and automatically translate it to {0}."> 
				</div> 
			<div id="FloaterEmbed" style="display: none"> 
				<div id="EmbedTextDiv"> 
					<span id="EmbedTextSpan">EMBED THE SNIPPET BELOW IN YOUR SITE</span> 
					<a id="EmbedHelpLink" title="Copy this code and place it into your HTML."> 
						<img id="EmbedHelpImg" src="https://ssl.microsofttranslator.com/static/25481438/img/embed_question.png">
					</a> 
				</div> 
				<div id="EmbedTextboxDiv"> 
					<input name="EmbedSnippetTextBox" type="text" id="EmbedSnippetTextBox" readonly="readonly" value="<div id='MicrosoftTranslatorWidget' class='Dark' style='color:white;background-color:#555555'></div><script type='text/javascript'>setTimeout(function(){var s=document.createElement('script');s.type='text/javascript';s.charset='UTF-8';s.src=((location &amp;&amp; location.href &amp;&amp; location.href.indexOf('https') == 0)?'https://ssl.microsofttranslator.com':'http://www.microsofttranslator.com')+'/ajax/v3/WidgetV3.ashx?siteData=ueOIGRSKkd965FeEGM5JtQ**&amp;ctf=true&amp;ui=true&amp;settings=manual&amp;from=en';var p=document.getElementsByTagName('head')[0]||document.documentElement;p.insertBefore(s,p.firstChild); },0);</script>" onclick="this.select()"> 
				</div> 
				<div id="EmbedNoticeDiv">
					<span id="EmbedNoticeSpan">Enable collaborative features and customize widget: <a href="http://www.bing.com/widget/translator" target="_blank">Bing Webmaster Portal</a></span>
				</div> 
				<div id="EmbedFooterDiv">
					<span id="EmbedBackSpan"><a href="javascript:Microsoft.Translator.FloaterOnEmbedBackClick()" title="Back To Translation">Back</a></span>
				</div> 
			</div> 
			<script type="text/javascript"> 
				var intervalId = setInterval(function () { if (MtPopUpList) { LanguageMenu = new MtPopUpList(); 
				var langMenu = document.getElementById(LanguageMenu_popupid); 
				var origLangDiv = document.createElement("div"); 
				origLangDiv.id = "OriginalLanguageDiv"; 
				origLangDiv.innerHTML = "<span id='OriginalTextSpan'>ORIGINAL: </span><span id='OriginalLanguageSpan'></span>"; 
				langMenu.appendChild(origLangDiv); 
				LanguageMenu.Init('LanguageMenu', LanguageMenu_keys, LanguageMenu_values, LanguageMenu_callback, LanguageMenu_popupid); 
				window["LanguageMenu"] = LanguageMenu; clearInterval(intervalId); } }, 1); 
			</script> 
		</div>
	</body>
</html>
